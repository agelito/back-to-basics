
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.2">
    
    
      
        <title>4. Manipulating Pixels - Back to Basics</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#manipulating-pixels" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Back to Basics" class="md-header__button md-logo" aria-label="Back to Basics" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Back to Basics
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              4. Manipulating Pixels
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/agelito/back-to-basics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Back to Basics" class="md-nav__button md-logo" aria-label="Back to Basics" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Back to Basics
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/agelito/back-to-basics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Tutorial
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorial" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Tutorial
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1_hello_world/" class="md-nav__link">
        1. Hello World
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2_build_system/" class="md-nav__link">
        2. Build System
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3_creating_a_window/" class="md-nav__link">
        3. Creating a Window
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          4. Manipulating Pixels
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        4. Manipulating Pixels
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-the-renderer" class="md-nav__link">
    Creating the Renderer
  </a>
  
    <nav class="md-nav" aria-label="Creating the Renderer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rendererh" class="md-nav__link">
    renderer.h
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rendererc" class="md-nav__link">
    renderer.c
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-diff-for-this-chapter" class="md-nav__link">
    Full diff for this chapter
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../5_hello_triangle/" class="md-nav__link">
        5. Hello Triangle
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creating-the-renderer" class="md-nav__link">
    Creating the Renderer
  </a>
  
    <nav class="md-nav" aria-label="Creating the Renderer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rendererh" class="md-nav__link">
    renderer.h
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rendererc" class="md-nav__link">
    renderer.c
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    Testing
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-diff-for-this-chapter" class="md-nav__link">
    Full diff for this chapter
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              

                


<h1 id="manipulating-pixels">Manipulating Pixels</h1>
<p>In the previous chapter we created a window and filled it with blue color. This works but it's cumbersome to index the correct location in the buffer as well as defining the color as a 32-bit integer. In this chapter we will look at creating another source file which will make all of that a lot easier. Paving the way to finally make some triangles appear.</p>
<h2 id="creating-the-renderer">Creating the Renderer</h2>
<p>To keep the <code>src/main.c</code> file clean all the code related to rendering pixels will be inside <code>src/renderer.c</code> file. Let's create that file and associated header file.</p>
<pre><code class="language-sh">touch src/renderer.h
touch src/renderer.c
</code></pre>
<p>Initially the renderer will contain some macros to help define colors more easily, as well as indexing and writing pixels to the pixels byte array. To demonstrate this functionality we'll also add a function for filling the window with a color and filling a rectangle (subset of the window) with a color.</p>
<h3 id="rendererh">renderer.h</h3>
<p>Start by filling in the header guard defines this is common practice for all header files to prevent them from being included every time:</p>
<pre><code class="language-c">// renderer.h

#ifndef RENDERER_INCLUDED
#define RENDERER_INCLUDED

// TODO: Declarations goes here

#endif // RENDERER_INCLUDED
</code></pre>
<p>Now replace the <code>TODO: Declarations goes here</code> comment with the following struct declaration. This struct will be used to pass information about the pixel buffer we're rendering into to the rendering. This helps keep the number of arguments we need to pass into macros and functions to a minimum. We'll also add a helper function for creating instances of this struct:</p>
<pre><code class="language-c">typedef struct RendererTargetBuffer {
    int32_t width;
    int32_t height;
    int32_t bytes_per_pixel;
    uint8_t* pixels;
} RendererTargetBuffer;

RendererTargetBuffer 
renderer_create_target_buffer(int32_t width, int32_t height, int32_t bytes_per_pixel, uint8_t* pixels);
</code></pre>
<p>Declare the <code>RendererRect</code> struct below the <code>RendererTargetBuffer</code> struct declaration:</p>
<pre><code class="language-c">typedef struct RendererRect {
    int32_t x;
    int32_t y;
    int32_t w;
    int32_t h;
} RendererRect;
</code></pre>
<p>Add the following macros below the <code>RendererRect</code> struct. These macros help pack 3 or four channel color values into a single 32 bit integer, as well as indexing the pixel buffer by offset or x,y coordinates:</p>
<pre><code class="language-c">// Pack 3 color bytes into one uint32
#define PackColorRGB(r, g, b) (r &amp; 0xff) &lt;&lt; 16 | (g &amp; 0xff) &lt;&lt; 8 | (b &amp; 0xff)

// Pack 4 color bytes into one uint32
#define PackColorRGBA(r, g, b, a) (a &amp; 0xff) &lt;&lt; 24 | PackColorRGB(r, g, b)

// Index pixel at x, y coordinates within RendererTargetBuffer target
#define IndexPixel(x, y, target) (x + y * target.width) * target.bytes_per_pixel

// Put pixel at offset into target
#define PutPixelByteOffset(target, offset, color) *(uint32_t *)(target.pixels + offset) = color

// Put pixel at x,y into target
#define PutPixelXY(target, x, y, color) PutPixelByteOffset(target, IndexPixel(x, y, target), color)
</code></pre>
<p>Below the macro definitions we can add the function declarations. We'll add three functions for now; one to help create the <code>RendererTargetBuffer</code> structure and the two others to fill entire window or a part of the window with desired color:</p>
<pre><code class="language-c">RendererTargetBuffer 
renderer_create_target_buffer(int32_t width, int32_t height, int32_t bytes_per_pixel, uint8_t* pixels);

void
renderer_fill(RendererTargetBuffer buffer, uint32_t color);

void 
renderer_fill_rect(RendererTargetBuffer buffer, RendererRect rect, uint32_t color);
</code></pre>
<h3 id="rendererc">renderer.c</h3>
<p>The implementation of <code>src/renderer.c</code> will be fairily straight forward because of the macros and structure we've defined in the header. Put the following content inside the <code>src/renderer.c</code> file:</p>
<pre><code class="language-c">// renderer.c

#include &lt;stdint.h&gt;
#include &quot;renderer.h&quot;

RendererTargetBuffer
renderer_create_target_buffer(int32_t width, int32_t height, int32_t bytes_per_pixel, uint8_t *pixels)
{
    RendererTargetBuffer target = {
        width, height, bytes_per_pixel, pixels
    };

    return target;
}

void 
renderer_fill(RendererTargetBuffer buffer, uint32_t color)
{
    uint32_t fill_until = buffer.width * buffer.height * buffer.bytes_per_pixel;
    uint32_t per_pixel_add = buffer.bytes_per_pixel;
    for (int offset = 0; offset &lt; fill_until; offset += per_pixel_add)
    {
        PutPixelByteOffset(buffer, offset, color);
    }
}

void 
renderer_fill_rect(RendererTargetBuffer buffer, RendererRect rect, uint32_t color)
{
    for (int y = rect.y; y &lt; rect.y + rect.h; y++)
    {
        for(int x = rect.x; x &lt; rect.x + rect.w; x++)
        {
            PutPixelXY(buffer, x, y, color);
        }
    }
}
</code></pre>
<blockquote>
<p>Beware, there's no clipping implemented yet so passing in rectangles which goes outside the available pixel buffer space will cause segmentation faults or other memory related errors.</p>
</blockquote>
<h2 id="testing">Testing</h2>
<p>We'll make some changes to <code>src/main.c</code> to test the new <code>src/renderer.c</code> implementation. Filling the window with a color like before as well as putting some colored squares in each corner of the window.</p>
<p>Update <code>src/main.c</code> with the following, put this code between the <code>game_window_surface_lock_pixels(game_window);</code> and <code>game_window_surface_unlock_and_update_pixels(game_window);</code> lines:</p>
<pre><code class="language-c">int32_t bytes_per_pixel = 4;
RendererTargetBuffer pixel_buffer = 
    renderer_create_target_buffer(game_window-&gt;pixel_buffer_width, game_window-&gt;pixel_buffer_height, bytes_per_pixel, game_window-&gt;pixels);

renderer_fill(pixel_buffer, PackColorRGB(0, 0, 255));

if (game_window-&gt;pixel_buffer_width != 0)
{
    RendererRect top_left = {
        0, 0, 32, 32
    };

    RendererRect top_right = {
        pixel_buffer.width - 32,
        0, 32, 32
    };

    RendererRect bottom_left = {
        0, 
        pixel_buffer.height - 32,
        32, 32
    };

    RendererRect bottom_right = {
        pixel_buffer.width - 32,
        pixel_buffer.height - 32,
        32, 32
    };

    renderer_fill_rect(pixel_buffer, top_left, PackColorRGB(255, 0, 0));
    renderer_fill_rect(pixel_buffer, top_right, PackColorRGB(0, 255, 0));
    renderer_fill_rect(pixel_buffer, bottom_left, PackColorRGB(0, 255, 255));
    renderer_fill_rect(pixel_buffer, bottom_right, PackColorRGB(255, 255, 0));
}
</code></pre>
<p>Don't forget to include the <code>src/renderer.h</code> file at the top of <code>src/main.c</code> as well:</p>
<pre><code class="language-c">#include &quot;renderer.h&quot;
</code></pre>
<p>Now all that's left to do is updating the <code>CMakeLists.txt</code> to include <code>src/renderer.c</code> when building the application. </p>
<pre><code class="language-cmake">add_executable(back_to_basics src/main.c src/game_window.c src/renderer.c)
</code></pre>
<p>Now try to build the application and if everything was alright observe the results, it should look like this:</p>
<p><img alt="rendering rectangles" src="../4_assets/test_rectangles.png" /></p>
<h2 id="full-diff-for-this-chapter">Full diff for this chapter</h2>
<pre><code class="language-diff">modified   CMakeLists.txt
@@ -7,5 +7,5 @@ set(CMAKE_C_STANDARD 11)
 find_package(SDL2 REQUIRED)
 include_directories(back_to_basics ${SDL2_INCLUDE_DIRS})

-add_executable(back_to_basics src/main.c src/game_window.c)
+add_executable(back_to_basics src/main.c src/game_window.c src/renderer.c)
 target_link_libraries(back_to_basics ${SDL2_LIBRARIES})
modified   src/main.c
@@ -3,6 +3,7 @@
 #include &lt;SDL2/SDL.h&gt;

 #include &quot;game_window.h&quot;
+#include &quot;renderer.h&quot;

 int main(int argc, char* argv[])
 {
@@ -21,14 +22,39 @@ int main(int argc, char* argv[])

         game_window_surface_lock_pixels(game_window);

-        uint32_t *pixels_32bpp = (uint32_t *)game_window-&gt;pixels;
-        for (int y = 0; y &lt; game_window-&gt;pixel_buffer_height; y++)
+        int32_t bytes_per_pixel = 4;
+        RendererTargetBuffer pixel_buffer = 
+            renderer_create_target_buffer(game_window-&gt;pixel_buffer_width, game_window-&gt;pixel_buffer_height, bytes_per_pixel, game_window-&gt;pixels);
+
+        renderer_fill(pixel_buffer, PackColorRGB(0, 0, 255));
+
+        if (game_window-&gt;pixel_buffer_width != 0)
         {
-            uint32_t row = y * game_window-&gt;pixel_buffer_width;
-            for (int x = 0; x &lt; game_window-&gt;pixel_buffer_width; x++)
-            {
-                pixels_32bpp[x + row] = 0xff0000ff;
-            }
+            RendererRect top_left = {
+                0, 0, 32, 32
+            };
+
+            RendererRect top_right = {
+                pixel_buffer.width - 32,
+                0, 32, 32
+            };
+
+            RendererRect bottom_left = {
+                0, 
+                pixel_buffer.height - 32,
+                32, 32
+            };
+
+            RendererRect bottom_right = {
+                pixel_buffer.width - 32,
+                pixel_buffer.height - 32,
+                32, 32
+            };
+
+            renderer_fill_rect(pixel_buffer, top_left, PackColorRGB(255, 0, 0));
+            renderer_fill_rect(pixel_buffer, top_right, PackColorRGB(0, 255, 0));
+            renderer_fill_rect(pixel_buffer, bottom_left, PackColorRGB(0, 255, 255));
+            renderer_fill_rect(pixel_buffer, bottom_right, PackColorRGB(255, 255, 0));
         }

         game_window_surface_unlock_and_update_pixels(game_window);
new file   src/renderer.c
@@ -0,0 +1,37 @@
+// renderer.c
+
+#include &lt;stdint.h&gt;
+#include &quot;renderer.h&quot;
+
+RendererTargetBuffer
+renderer_create_target_buffer(int32_t width, int32_t height, int32_t bytes_per_pixel, uint8_t *pixels)
+{
+    RendererTargetBuffer target = {
+        width, height, bytes_per_pixel, pixels
+    };
+
+    return target;
+}
+
+void 
+renderer_fill(RendererTargetBuffer buffer, uint32_t color)
+{
+    uint32_t fill_until = buffer.width * buffer.height * buffer.bytes_per_pixel;
+    uint32_t per_pixel_add = buffer.bytes_per_pixel;
+    for (int offset = 0; offset &lt; fill_until; offset += per_pixel_add)
+    {
+        PutPixelByteOffset(buffer, offset, color);
+    }
+}
+
+void 
+renderer_fill_rect(RendererTargetBuffer buffer, RendererRect rect, uint32_t color)
+{
+    for (int y = rect.y; y &lt; rect.y + rect.h; y++)
+    {
+        for(int x = rect.x; x &lt; rect.x + rect.w; x++)
+        {
+            PutPixelXY(buffer, x, y, color);
+        }
+    }
+}
\ No newline at end of file
new file   src/renderer.h
@@ -0,0 +1,44 @@
+// renderer.h
+
+#ifndef RENDERER_INCLUDED
+#define RENDERER_INCLUDED
+
+typedef struct RendererTargetBuffer {
+    int32_t width;
+    int32_t height;
+    int32_t bytes_per_pixel;
+    uint8_t* pixels;
+} RendererTargetBuffer;
+
+typedef struct RendererRect {
+    int32_t x;
+    int32_t y;
+    int32_t w;
+    int32_t h;
+} RendererRect;
+
+// Pack 3 color bytes into one uint32
+#define PackColorRGB(r, g, b) (r &amp; 0xff) &lt;&lt; 16 | (g &amp; 0xff) &lt;&lt; 8 | (b &amp; 0xff)
+
+// Pack 4 color bytes into one uint32
+#define PackColorRGBA(r, g, b, a) (a &amp; 0xff) &lt;&lt; 24 | PackColorRGB(r, g, b)
+
+// Index pixel at x, y coordinates within RendererTargetBuffer target
+#define IndexPixel(x, y, target) (x + y * target.width) * target.bytes_per_pixel
+
+// Put pixel at offset into target
+#define PutPixelByteOffset(target, offset, color) *(uint32_t *)(target.pixels + offset) = color
+
+// Put pixel at x,y into target
+#define PutPixelXY(target, x, y, color) PutPixelByteOffset(target, IndexPixel(x, y, target), color)
+
+RendererTargetBuffer 
+renderer_create_target_buffer(int32_t width, int32_t height, int32_t bytes_per_pixel, uint8_t* pixels);
+
+void
+renderer_fill(RendererTargetBuffer buffer, uint32_t color);
+
+void 
+renderer_fill_rect(RendererTargetBuffer buffer, RendererRect rect, uint32_t color);
+
+#endif // RENDERER_INCLUDED
\ No newline at end of file
</code></pre>




              

<!-- Giscus -->
<h2 id="__comments">Comments</h2>
<script src="https://giscus.app/client.js" data-repo="agelito/back-to-basics-discussions" data-repo-id="R_kgDOH8Q8Dw"
    data-category="Announcements" data-category-id="DIC_kwDOH8Q8D84CRPhD" data-mapping="pathname" data-strict="0"
    data-reactions-enabled="1" data-emit-metadata="0" data-input-position="bottom" data-theme="light" data-lang="en"
    crossorigin="anonymous" async>
    </script>

<!-- Synchronize Giscus theme with palette -->
<script>
    var giscus = document.querySelector("script[src*=giscus]")

    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"
        giscus.setAttribute("data-theme", theme)
    }

    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function () {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function () {
            var palette = __md_get("__palette")
            if (palette && typeof palette.color === "object") {
                var theme = palette.color.scheme === "slate" ? "dark" : "light"

                /* Instruct Giscus to change theme */
                var frame = document.querySelector(".giscus-frame")
                frame.contentWindow.postMessage(
                    { giscus: { setConfig: { theme } } },
                    "https://giscus.app"
                )
            }
        })
    })
</script>

            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../3_creating_a_window/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 3. Creating a Window" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              3. Creating a Window
            </div>
          </div>
        </a>
      
      
        
        <a href="../5_hello_triangle/" class="md-footer__link md-footer__link--next" aria-label="Next: 5. Hello Triangle" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              5. Hello Triangle
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
    
  </body>
</html>